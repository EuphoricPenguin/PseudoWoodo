<!DOCTYPE html>
<html>

<head>
    <title>PseudoWoodo Web Interpreter</title>
    <style>
        body {
            font-family: monospace;
            margin: 20px;
        }

        .editor {
            width: 600px;
            height: 400px;
        }

        .output {
            border: 1px solid #ccc;
            padding: 10px;
            margin-top: 10px;
        }

        .error {
            color: red;
        }
    </style>
</head>

<body>
    <h1>PseudoWoodo 0.1</h1>
    <textarea class="editor" id="code">console-log as 'Hello World' 
call console-log</textarea>
    <br>
    <button onclick="runCode()">Run</button>
    <div class="output" id="output"></div>
    <script>
        let interpreter = null;

        function runCode() {
            const code = document.getElementById('code').value;
            const output = document.getElementById('output');
            output.innerHTML = '';

            if (interpreter) {
                interpreter.stop();
            }

            interpreter = new PseudoWoodoInterpreter((message) => {
                if (message === null) {
                    // Clear command received
                    output.innerHTML = '';
                } else {
                    // Regular message
                    const div = document.createElement('div');
                    div.textContent = message;
                    output.appendChild(div);
                }
            });

            interpreter.execute(code).catch(e => {
                output.innerHTML = `<div class="error">Error: ${e.message}</div>`;
            });
        }
    </script>
    <script src="./script.js"></script>
</body>

</html>